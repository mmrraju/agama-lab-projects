Flow forget.pw
     Basepath ""
     Configs smtp
authService = Call io.jans.as.server.service.AuthenticationService#class 
authServiceInstance = Call io.jans.service.cdi.util.CdiUtil#bean authService
userService = Call io.jans.as.server.service.UserService#class 
userServiceInstance = Call io.jans.service.cdi.util.CdiUtil#bean userService
authResult = {}
userMail = {}
Repeat 3 times max
     creds = RRF "login.ftlh" authResult
     authResult.success = Call authServiceInstance authenticate creds.username creds.password
     authResult.uid = creds.username
     // If try to reset password
     When creds.forgetpassword is true
          Log "@info test"
          loadMail = RRF "mail.ftlh" userMail
          user  = Call userServiceInstance getUserByAttribute loadMail.mail
          userMail.mail = loadMail.mail
          When user is not null
               Log "@info User found for user mail : " userMail.mail
               token = "123456"
          Log "@info User not found for mail : " userMail.mail
     Log "@info Chose to validate user"
     When authResult.success is true
          Log "@info Successfully login"